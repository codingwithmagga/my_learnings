<html>
  <head>
    <style>
      .Portal {
        border-color: lightblue;
        border-style: solid;
      }
    </style>
  </head>
  <body>
    <h1>
      Memory Management
    </h1>
    <br/>
    <ul>
        <li>Memory Essentials
            <ul>
                <li>RAM Types
                    <ul>
                        <li>Explain the main aspects of RAM
                            <ul>
                                <li>Volatile memory, data is lost without power</li>
                                <li>Used for temporary storage of data and instructions</li>
                                <li>Faster than HDD/SDD</li>
                                <li>Dynamic and static types</li>
                            </ul>
                        </li>
                        <li>Explain the main aspects of SRAM
                            <ul>
                                <li>Static RAM</li>
                                <li>Faster access times compared to DRAM</li>
                                <li>Needs 6 transistors per bit ⇒ Expensive</li>
                                <li>Retains data without refresh cycles</li>
                                <li>Used in CPU caches</li>
                            </ul>
                        </li>
                        <li>Explain the main aspects of DRAM
                            <ul>
                                <li>Dynamic RAM</li>
                                <li>Uses capacitors (1 per bit) to store data, which needs 1 transistor each</li>
                                <li>Capacitors are either charged (1) or not (0)</li>
                                <li>Slower than SRAM, but denser and cheaper to produce</li>
                                <li>Requires periodic refreshing to maintain data integrity</li>
                                <li>Used in most computers and devices for main memory</li>
                            </ul>
                        </li>
                        <li>Explain the refresh process of DRAM
                            <ul>
                                <li>With time, capacitors lose their charge</li>
                                <li>Every few milliseconds, data (of one row of capacitors) is read to a sense amplifier
                                    <ul>
                                        <li>A sense amplifier detects small signals in electronic systems</li>
                                    </ul>
                                </li>
                                <li>The sense amplifier restores the charge to the capacitors to prevent data loss.</li>
                            </ul>
                        </li>
                        <li>Explain the main aspects of Asynchronous RAM
                            <ul>
                                <li>Operates independently of the system clock, allowing more flexibility in timing.</li>
                                <li>Typically, slower than synchronous RAM due to lack of clock synchronization.</li>
                                <li>There is a delay between requests and the responses:
<img src="https://remnote-user-data.s3.amazonaws.com/GUwfg8wR6j_PtnA7aZVv6BOVUGDVkDXJ92gfivj7Q7OElBN-PZ_akEffmJo7f94uvlosHpuG86YPyMg4ZTtl1u_Hp0KQqy2RjHStqdA6BugcORQPtD_U4CaZAM-FRLHJ.png" width="714" height="285.9944751381215"/></li>
                            </ul>
                        </li>
                        <li>Explain the main aspects of SDRAM
                            <ul>
                                <li>Synchronous Dynamic RAM</li>
                                <li>RAM clock is synchronized with the system clock</li>
                                <li>Supports burst mode for faster data access</li>
                                <li>No wasted cycles
<img src="https://remnote-user-data.s3.amazonaws.com/FZq2HxCt2AvPBZ0dYliIEKCRIkL2vxqQYQfj1Kokblv0NQ6mRiDEGTlplX_ueVM-cWW5PEfCNFBUNFgIljcdn0Xu6-ws57JLICxaLqilabGHGZLkR5XoOkQPFRojfiau.png" width="714" height="285.00828729281767"/></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li></li>
                <li>DDR SDRAM
                    <ul>
                        <li>What does DDR SDRAM stand for?→Double Data Rate Synchronized Dynamic Random Access Memory</li>
                        <li>Explain the improvement in DDR SDRAM→Increased data transfer rates by transferring data on both rising and falling edges of the clock cycle.</li>
                        <li>Explain the main aspects of DDR4 SDRAM
                            <ul>
                                <li>DDR4 Pins: Each pin transfers 1 byte (8 bits).</li>
                                <li>Burst Size: 64 bytes per memory access burst/cache line.</li>
                                <li>Cycle Time: Approximately 100 nanoseconds for reading.</li>
                                <li>Previous DDRs: DDR1 (2 bits), DDR2 (4 bits), DDR3 (8 bits).</li>
                                <li>Optimizations: DDR4 allows more transfers per second than DDR3 even if the number of bits are equal</li>
                                <li><img src="https://remnote-user-data.s3.amazonaws.com/j-_WQ8ON3SsAbO27HVm7n_AFVSMB2bZ6uiUomhnp7Lvp8Vbwr0-EG89Zsri1GRTvMAktkR0UGB1_n8TRu9wMvi_d42rPJKyBP9H9Y4MboFUcBUIy_r5-vChm_3HIRbTt.png" width="490" height="319"/></li>
                            </ul>
                        </li>
                        <li>Explain the improvements of DDR5 vs DDR4
                            <ul>
                                <li>Channels: DDR5 has two channels of 32 pins each.</li>
                                <li>Prefetch Buffer: Increased to 16 bits per pin.</li>
                                <li>Burst Size: Can deliver 128 bytes (two 64-byte bursts).</li>
                                <li>Channel Usage: Different cores can use separate channels.</li>
                                <li>Locking Mechanism: DDR4 locks during reads, blocking other cores.</li>
                                <li>CPU Requirement: Must support channel concept for efficiency.</li>
                                <li><img src="https://remnote-user-data.s3.amazonaws.com/2qeYbv-9fNtgJSqepxsacD3mw64CZhUUSo01R-fCWhIJheq13uk6z-Q3qlrNw_F-IMnGAuC2PWknt-1A1fTrU1jH8vaFrGPyRG2FsvvXyXLeF1uQcoDoCWJ1sYKhbsrU.png" width="578" height="314"/></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li></li>
                <li>RAM Components
                    <ul>
                        <li>Explain the RAM structure
                            <ul>
                                <li>Dual Inline Memory Module (DIMM), where the RAM chips are build on</li>
                                <li>Bank: subdivision of memory within a RAM module</li>
                                <li>Rows: Multiple Rows in one Bank (for example 32k)</li>
                                <li>Columns: Multiple Columns per Row (for example 1024)</li>
                                <li>Cells: Multiple cells per column (usually 1cell = 1bit/capacitor and 16/32 cells per column)</li>
                                <li><img src="https://remnote-user-data.s3.amazonaws.com/jWem2Z6_8y5n21DYm25xkhN8_h-gtsBjhcDBzU6sKjrRv-bVWJ_cPfUxU-RBBDh5_uKDIFixpKFSeGDHqc7xBjzS6OVN6U8dd1NgUdbgXy-MEbnEd5srC_fNjSeShhUw.png" width="534" height="337"/></li>
                            </ul>
                        </li>
                        <li>Explain how the data is accessed in RAM
                            <ul>
                                <li>Only one row can opened at a time</li>
                                <li>Because there is only one sense amplifier per bank</li>
                                <li>Opening a row means reading/draining the whole row</li>
                                <li>The relevant part of the row is cached in a burst</li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li></li>
                <li>Data alignement
                    <ul>
                        <li>Explain this image <img src="https://remnote-user-data.s3.amazonaws.com/X7bqpnSSx3xEgvYwn4iOrCf16JaESlm1Zeo4g4EJ78jXZ3G4YrxsQ-Bm05MjAS2s_34cnmY5kdUDDc-6VD6FQmSiG4JwAnFoFFOvRhfDK7EyXG2vQ1WiMNrzTXL1jIPr.png" width="420" height="356"/>
                            <ul>
                                <li>Data alignement concept</li>
                                <li>Certain variable sizes are stored in specific addresses</li>
                                <li>E.g. 4 bytes are placed in addresses divisible by 4</li>
                                <li>Rearranging the data can reduce the necessary memory space</li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>Virtual memory
            <ul>
                <li>Name advantages of virtual vs. physical memory
                    <ul>
                        <li>No external fragmentation</li>
                        <li>Shared memory</li>
                        <li>Isolation of data between processes</li>
                        <li>No memory limitation (beside the size of HDD/SSD)</li>
                    </ul>
                </li>
                <li>External fragmentation
                    <ul>
                        <li>Definition
                            <ul>
                                <li>External fragmentation occurs when free memory is split into small, non-contiguous blocks, making it difficult to allocate larger memory requests.</li>
                                <li><img src="https://remnote-user-data.s3.amazonaws.com/-hA_o-449Hhx6PFGdBkUChJsf17OfEbuKJ3oADq_2nR5ZInZt8EsIoBg5e-8tYUuKE2VgpktfVt0TbcJfkfV-3AvWeF8kiInwd2DtHaaHU_sEHCRZhy59fzYKVQ417Iy.png" width="393" height="386.33898305084745"/> </li>
                            </ul>
                        </li>
                        <li>Cause→It arises from allocating and deallocating memory dynamically. Over time, as processes are loaded and removed, gaps of free space form between allocated blocks.</li>
                        <li>Impact→Reduces available memory and increases the likelihood of needing to swap pages to disk.</li>
                    </ul>
                </li>
                <li></li>
                <li>Internal fragmentation
                    <ul>
                        <li>Cause→Internal fragmentation occurs when memory is allocated in fixed-size blocks, and the amount of memory requested by a process is less than the size of the allocated block. The unused space within the allocated block is wasted and cannot be used by other processes, leading to inefficient memory utilization. </li>
                    </ul>
                </li>
                <li>Explain the concept of virtual memory
                    <ul>
                        <li>Abstraction of physical memory</li>
                        <li>Fixed block sizes (often 4kb) of memory are used ⇒ called paging</li>
                        <li>The logical page is mapped to the physical page using a process page table</li>
                        <li>Many to one mapping, which means many virtual pages can map to one physical address</li>
                        <li><img src="https://remnote-user-data.s3.amazonaws.com/kMvDrOQFhA0qpFMNOBSvFS_JhCQ2K9CWX1oqHHaff8cZkh0MeZaca3nlFVGjwZUWpNv9jGbB4rR0i3eS56k8f9YUtb1UjN6Xcjw0iM6dJkXvEMXB1yDtjb4cgMNML0BN.png" width="738" height="407.4786096256684"/></li>
                    </ul>
                </li>
                <li>Do we have fragmentation in virtual memory?→Yes, while external fragmentation is solved, internal fragmentation can occur, especially with big page sizes.</li>
                <li>Explain how shared memory works in virtual memory
                    <ul>
                        <li>Shared memory allows multiple processes to access and modify the same region of virtual memory, since all virtual addresses are mapped the same physical address space</li>
                        <li>E.g. spinning up the same program multiple times, the code is just loaded once to memory and all virtual pages map to the same physical space</li>
                        <li>The same works for shared libraries, they are only loaded once to the RAM.</li>
                    </ul>
                </li>
                <li>Explain how data isolation works in virtual memory→Each process has its own isolated address space, preventing one process from accessing another&#39;s memory.</li>
                <li>Explain how the limitation of physical memory is solved
                    <ul>
                        <li>The OS can decide to store process memory which was not used for some time on to disk. </li>
                        <li>The space in RAM is freed and can be used by other or even the same process. </li>
                        <li>When the stored data is accessed again via its virtual address, the OS copies the process data back to RAM. </li>
                    </ul>
                </li>
                <li>What are page tables, and how are they used?
                    <ul>
                        <li>Data structures for mapping virtual memory addresses to physical</li>
                        <li>Each process has its own page table</li>
                        <li>The page table is stored in memory, adding an overhead for address translation.</li>
                        <li>Accessing the page table requires additional memory reads, impacting performance</li>
                        <li>The overhead can be reduced by the TLB</li>
                    </ul>
                </li>
                <li>Describe what the TLB does→Translation Lookaside Buffer (TLB): A cache that stores recently used virtual-physical mappings to speed up address resolution.</li>
                <li>What is a drawback of virtual memory?
                    <ul>
                        <li>We have an additional layer of translations, since the CPU can&#39;t read from virtual addresses.</li>
                        <li>This is done by page tables, but adding this includes additional maintenance and memory usage</li>
                        <li>If a page fault occurs, the performance sinks due to kernel mode switch and reading/writing back from disc.</li>
                        <li>All this results in a more complex CPU architectures (MMU/TLB)</li>
                        <li>The TLB can also have cache misses</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>Direct Memory Access 
            <ul>
                <li>What happens when a key is pressed on the keyboard?→When a key is pressed, the value is written to the keyboard buffer and the CPU is interrupted. The interruption is a context switch to kernel mode, which executes the interrupt service routine (ISR) function in the kernel.</li>
                <li>What does the Interrupt Service Routine (ISR) function do for keyboard inputs?→The ISR function reads from the keyboard, puts the value in the CPU cache, and then transfers it to the memory.</li>
                <li>Why is DMA useful for larger amounts of data?→Otherwise, the transfer of every single data point goes through the CPU, which causes a bottleneck for larger amounts of data.</li>
                <li>What is the DMA and what does it do?
                    <ul>
                        <li>DMA stands for Direct Memory Access.</li>
                        <li>It allows direct access from the network/disk to the RAM.</li>
                        <li>The CPU initializes the transfer with a memory address for reading/writing and the device buffer.</li>
                        <li>The DMA executes the operation and starts the direct transfer.</li>
                    </ul>
                </li>
                <li>Why is it important that the address is locked during DMA operations?→It is important because the DMA uses a physical address for the transfer, and the address must be locked to prevent any other operations from interfering with the ongoing transfer.</li>
                <li>What are some drawbacks associated with DMA?
                    <ul>
                        <li>DMA can be susceptible to DMA attacks (security issue).</li>
                        <li>It adds complexity.</li>
                    </ul>
                </li>
                <li>Is it a good idea to use the DMA for keyboard and mouse interrupts? Why or why not?→No, DMA shouldn&#39;t be used for keyboard and mouse interrupts because the CPU is faster in handling these due to the initialization costs involved with DMA.</li>
                <li></li>
                <li></li>
            </ul>
        </li>

    </ul>
    </body>
</html>
